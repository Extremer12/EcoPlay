<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EcoPlay - Reciclaje Divertido</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
  </head>
  <body>
    <!-- Loader -->
    <div id="app-loader" class="loader-container">
      <div class="loader-content">
        <h1 class="loader-title">â™»ï¸ EcoPlay</h1>
        <p class="loader-text">Cargando...</p>
        <div class="loader-spinner">
          <div class="spinner-dot"></div>
          <div class="spinner-dot"></div>
          <div class="spinner-dot"></div>
        </div>
      </div>
    </div>

    <!-- Header Navigation -->
    <header id="header" class="hidden"></header><div class="container"></div>
      <nav>
        <button onclick="showScreen('home')" class="nav-btn">ğŸ  Inicio</button>
        <button onclick="showScreen('game')" class="nav-btn">
          ğŸ® Jugar / Play
        </button>
        <button onclick="showScreen('ranking')" class="nav-btn">
          ğŸ† Ranking
        </button>
        <button onclick="logout()" class="nav-btn">ğŸšª Salir / Logout</button>
      </nav>
    </header>

    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
      <div class="container">
        <div class="signup-card">
          <div class="signup-header">
            <div class="recycle-icon">â™»ï¸</div>
            <h1 class="signup-title">EcoPlay</h1>
          </div>
          <p class="signup-subtitle">
            AprendÃ© a reciclar jugando<br />
            <span>Learn to recycle by playing</span>
          </p>

          <!-- Email Input -->
          <div class="input-container-3d">
            <div class="shadow-input"></div>
            <button type="button" class="input-button-shadow" aria-label="Email">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000" width="25px" height="25px">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
            </button>
            <input
              type="email"
              id="email-input"
              class="input-search-3d"
              placeholder="tu@email.com"
            />
          </div>

          <!-- Password Input -->
          <div class="input-container-3d">
            <div class="shadow-input"></div>
            <button type="button" class="input-button-shadow" aria-label="Password">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000" width="25px" height="25px"></svg>
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
              </svg>
            </button>
            <input
              type="password"
              id="password-input"
              class="input-search-3d"
              placeholder="ContraseÃ±a / Password"
            />
          </div>

          <button type="button" onclick="handleLogin()" class="btn-start-3d">
            <span>Iniciar SesiÃ³n / Login</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </button>

          <div class="auth-switch">
            <p>Â¿No tenÃ©s cuenta? / Don't have an account?</p>
            <button type="button" onclick="showSignup()" class="link-btn">Registrate / Sign Up</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Sign Up Screen -->
    <div id="signup-screen" class="screen">
      <div class="container">
        <div class="signup-card">
          <div class="signup-header">
            <div class="recycle-icon">â™»ï¸</div>
            <h1 class="signup-title">Registro / Sign Up</h1>
          </div>
          <p class="signup-subtitle">
            CreÃ¡ tu cuenta para empezar<br />
            <span>Create your account to start</span>
          </p>

          <!-- Name Input -->
          <div class="input-container-3d">
            <div class="shadow-input"></div>
            <button type="button" class="input-button-shadow" aria-label="Usuario">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000" width="25px" height="25px">
                <path d="M0 0h24v24H0z" fill="none"></path>
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path>
              </svg>
            </button>
            <input
              type="text"
              id="signup-name-input"
              class="input-search-3d"
              placeholder="Tu nombre / Your name"
            />
          </div>

          <!-- Email Input -->
          <div class="input-container-3d">
            <div class="shadow-input"></div>
            <button type="button" class="input-button-shadow" aria-label="Email">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000" width="25px" height="25px">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
            </button>
            <input
              type="email"
              id="signup-email-input"
              class="input-search-3d"
              placeholder="tu@email.com"
            />
          </div>

          <!-- Password Input -->
          <div class="input-container-3d">
            <div class="shadow-input"></div>
            <button type="button" class="input-button-shadow" aria-label="Password">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000" width="25px" height="25px">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
              </svg>
            </button>
            <input
              type="password"
              id="signup-password-input"
              class="input-search-3d"
              placeholder="ContraseÃ±a (min 6 caracteres)"
            />
          </div>

          <button type="button" onclick="handleSignup()" class="btn-start-3d">
            <span>Crear Cuenta / Create Account</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </button>

          <div class="auth-switch">
            <p>Â¿Ya tenÃ©s cuenta? / Already have an account?</p>
            <button type="button" onclick="showLogin()" class="link-btn">Iniciar SesiÃ³n / Login</button>
          </div>
        </div>
      </div>
    </div>p>

    <!-- Home Screen -->
    <div id="home-screen" class="screen">
      <div class="container">
        <div class="card">
          <h1 class="title">â™»ï¸ Bienvenido/a</h1>
          <p class="welcome-text">Hola, <span id="user-name"></span>!</p>
          <p class="subtitle">
            Tu Puntaje / Your Score: <span id="home-score">0</span>
          </p>
          <button onclick="showScreen('game')" class="btn-primary">
            ğŸ® Jugar / Play
          </button>
          <button onclick="showScreen('ranking')" class="btn-secondary">
            ğŸ† Ver Ranking / Leaderboard
          </button>
        </div>
      </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
      <div class="container">
        <h1 class="game-title">ArrastrÃ¡ la basura al tacho correcto.</h1>
        <p class="game-subtitle">Learn English while you recycle!</p>

        <div class="game-stats">
          <div class="score-display">
            <div class="stat-label">Tu Puntaje / Your Score</div>
            <div class="stat-value" id="game-score">0</div>
          </div>
          <div class="items-remaining">
            <div class="stat-label">Items Restantes / Remaining</div>
            <div class="stat-value" id="items-remaining">0</div>
          </div>
        </div>

        <div id="feedback" class="feedback"></div>

        <!-- Bins -->
        <div class="bins-container">
          <div class="bin bin-plastic" data-type="plastic">
            <div class="bin-icon">ğŸ§´</div>
            <div class="bin-label">PlÃ¡stico<br /><span>Plastic</span></div>
          </div>
          <div class="bin bin-paper" data-type="paper">
            <div class="bin-icon">ğŸ“„</div>
            <div class="bin-label">Papel<br /><span>Paper</span></div>
          </div>
          <div class="bin bin-glass" data-type="glass">
            <div class="bin-icon">ğŸ¾</div>
            <div class="bin-label">Vidrio<br /><span>Glass</span></div>
          </div>
          <div class="bin bin-metal" data-type="metal">
            <div class="bin-icon">ğŸ¥«</div>
            <div class="bin-label">Metal<br /><span>Metal</span></div>
          </div>
          <div class="bin bin-organic" data-type="organic">
            <div class="bin-icon">ğŸ</div>
            <div class="bin-label">OrgÃ¡nico<br /><span>Organic</span></div>
          </div>
        </div>

        <!-- Items to drag -->
        <div id="items-container" class="items-container"></div>

        <div class="game-buttons">
          <button type="button" onclick="initGame()" class="btn-restart">
            ğŸ”„ Reiniciar / Restart
          </button>
          <button
            type="button"
            onclick="showScreen('home')"
            class="btn-secondary"
          >
            ğŸ  Volver al Inicio / Home
          </button>
        </div>
      </div>
    </div>

    <!-- Ranking Screen -->
    <div id="ranking-screen" class="screen">
      <div class="container">
        <h1 class="title">ğŸ† Ranking / Leaderboard</h1>
        <div id="leaderboard" class="leaderboard"></div>
        <button onclick="showScreen('home')" class="btn-secondary">
          ğŸ  Volver / Back
        </button>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
